{% extends 'base.html' %}
{% load static %}

{% block content %}
<header class="masthead my-4">
    <div class="text-center">
        <h1 class="section-heading text-uppercase">MÚSICA</h1>
    </div>
</header>

<div class="container my-4">
    <div class="list-group list-group-flush">
        {% for cancion in canciones %}
        <a href="{% url 'detalle_cancion' cancion.id %}" class="text-decoration-none text-dark">
            <div class="row list-group-item list-group-item-action align-items-center py-3">
                <div class="col-4 col-md-2 col-lg-1">
                    {% if cancion.album and cancion.album.portada %}
                    <img src="{{ cancion.album.portada.url }}" 
                         class="img-fluid rounded-2 shadow-sm" 
                         alt="Portada de {{ cancion.album.titulo }}">
                    {% else %}
                    <img src="{% static 'assets/img/default_album.png' %}" 
                         class="img-fluid rounded-2 opacity-75" 
                         alt="Álbum no disponible">
                    {% endif %}
                </div>

                <div class="col-8 col-md-10 col-lg-11">
                    <div class="row align-items-center">
                        <div class="col-12 col-md-4">
                            <div class="fw-bold fs-5 text-primary">{{ cancion.titulo }}</div>
                            <div class="text-muted">{{ cancion.artista.nombre }}</div>
                        </div>

                        <div class="col-md-3 d-none d-md-block">
                            <span class="badge bg-secondary">{{ cancion.categoria }}</span>
                        </div>

                        <div class="col-md-4 d-none d-md-block">
                            {% if cancion.album %}
                            <i class="fas fa-compact-disc me-2"></i>{{ cancion.album.titulo }}
                            {% else %}
                            <span class="text-muted">Sin álbum asociado</span>
                            {% endif %}
                        </div>

                        <div class="col-md-1 d-none d-md-block text-end">
                            <i class="fas fa-chevron-right text-muted"></i>
                        </div>
                    </div>
                </div>
            </div>
        </a>
        {% empty %}
        <div class="text-center py-5 bg-light rounded-3">
            <i class="fas fa-music fa-3x text-muted mb-3"></i>
            <h4 class="text-muted">No hay canciones disponibles</h4>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}